# ========================================
# WhatsApp Gateway SaaS Platform
# Production Environment Configuration
# ========================================

# ----------------------------------------
# Application Settings
# ----------------------------------------
NODE_ENV=production
APP_URL=https://yourdomain.com
NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# ----------------------------------------
# Database (PostgreSQL)
# ----------------------------------------
POSTGRES_DB=wagateway
POSTGRES_USER=wagateway
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_123456
DATABASE_URL=postgresql://wagateway:CHANGE_ME_STRONG_PASSWORD_123456@postgres:5432/wagateway

# ----------------------------------------
# Redis Cache
# ----------------------------------------
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_123456
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD_123456@redis:6379

# ----------------------------------------
# InfluxDB (Time-series Database)
# ----------------------------------------
INFLUXDB_USER=admin
INFLUXDB_PASSWORD=CHANGE_ME_INFLUX_PASSWORD_123456
INFLUXDB_ORG=wagateway
INFLUXDB_BUCKET=pon_monitoring
INFLUXDB_TOKEN=CHANGE_ME_INFLUXDB_TOKEN_64_CHARS_LONG_RANDOM_STRING_HERE
INFLUXDB_URL=http://influxdb:8086

# ----------------------------------------
# MinIO (Object Storage)
# ----------------------------------------
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=CHANGE_ME_MINIO_PASSWORD_123456
MINIO_ACCESS_KEY=CHANGE_ME_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=CHANGE_ME_MINIO_SECRET_KEY_LONG_RANDOM_STRING

# ----------------------------------------
# Evolution API (WhatsApp)
# ----------------------------------------
EVOLUTION_SERVER_URL=https://evolution.yourdomain.com
EVOLUTION_API_KEY=CHANGE_ME_EVOLUTION_API_KEY_RANDOM_64_CHARS
EVOLUTION_API_URL=http://evolution-api:8080
WEBHOOK_GLOBAL_URL=https://api.yourdomain.com/api/v1/webhooks/evolution

# ----------------------------------------
# JWT Authentication
# ----------------------------------------
JWT_SECRET=CHANGE_ME_JWT_SECRET_RANDOM_64_CHARS_MINIMUM
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=7d

# ----------------------------------------
# Email (SMTP)
# ----------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@yourdomain.com

# ----------------------------------------
# Payment Gateway (Midtrans)
# ----------------------------------------
MIDTRANS_SERVER_KEY=your-midtrans-server-key
MIDTRANS_CLIENT_KEY=your-midtrans-client-key
MIDTRANS_IS_PRODUCTION=true

# ----------------------------------------
# Monitoring (Grafana)
# ----------------------------------------
GRAFANA_USER=admin
GRAFANA_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD

# ----------------------------------------
# SSL/TLS Configuration
# ----------------------------------------
# Domain configuration for SSL certificates
DOMAIN=yourdomain.com
SSL_EMAIL=admin@yourdomain.com

# ----------------------------------------
# Backup Configuration
# ----------------------------------------
BACKUP_RETENTION_DAYS=30
# Optional: S3 backup
S3_BACKUP_BUCKET=
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_REGION=us-east-1

# Optional: Google Cloud Storage backup
GCS_BACKUP_BUCKET=

# ----------------------------------------
# Notification Webhooks (Optional)
# ----------------------------------------
# Slack webhook for deployment notifications
DEPLOYMENT_WEBHOOK=
# Slack webhook for backup notifications
BACKUP_NOTIFICATION_WEBHOOK=

# ----------------------------------------
# Session Secret
# ----------------------------------------
SESSION_SECRET=CHANGE_ME_SESSION_SECRET_RANDOM_STRING

# ----------------------------------------
# Rate Limiting
# ----------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ----------------------------------------
# CORS Settings
# ----------------------------------------
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# ----------------------------------------
# File Upload Limits
# ----------------------------------------
MAX_FILE_SIZE=104857600
# 100MB in bytes

# ----------------------------------------
# PON Monitoring
# ----------------------------------------
POLL_INTERVAL=60
# Polling interval in seconds

LOG_LEVEL=INFO
# LOG_LEVEL options: DEBUG, INFO, WARNING, ERROR

# ----------------------------------------
# Security Headers
# ----------------------------------------
HELMET_ENABLED=true
CORS_CREDENTIALS=true

# ----------------------------------------
# API Versioning
# ----------------------------------------
API_VERSION=v1

# ========================================
# IMPORTANT SECURITY NOTES:
# ========================================
# 1. CHANGE ALL "CHANGE_ME_*" values with strong random strings
# 2. Use different passwords for each service
# 3. Generate strong random strings using:
#    openssl rand -hex 32
#    or
#    openssl rand -base64 32
# 4. Store this file securely, never commit to git
# 5. Use environment-specific configurations
# 6. Rotate secrets regularly (every 90 days)
# 7. Use a secrets management tool for production (Vault, AWS Secrets Manager, etc.)
# ========================================

# ----------------------------------------
# Quick Setup Commands
# ----------------------------------------
# Generate JWT Secret:
# openssl rand -hex 32

# Generate passwords:
# openssl rand -base64 24

# Test database connection:
# psql postgresql://wagateway:PASSWORD@localhost:5432/wagateway

# Test Redis:
# redis-cli -h localhost -p 6379 -a PASSWORD ping

# ========================================
